<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CSS | Notes</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/notes/logo.png">
    <link rel="manifest" href="/notes/manifest.json">
    <link rel="apple-touch-icon" href="/notes/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/notes/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/notes/assets/css/0.styles.aa6162e3.css" as="style"><link rel="preload" href="/notes/assets/js/app.e4bd1985.js" as="script"><link rel="preload" href="/notes/assets/js/2.48edc9b5.js" as="script"><link rel="preload" href="/notes/assets/js/16.a390283c.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.73c86683.js"><link rel="prefetch" href="/notes/assets/js/11.b7367004.js"><link rel="prefetch" href="/notes/assets/js/12.acae44d9.js"><link rel="prefetch" href="/notes/assets/js/13.09f44fc9.js"><link rel="prefetch" href="/notes/assets/js/14.53a4c0e2.js"><link rel="prefetch" href="/notes/assets/js/15.3a1f0172.js"><link rel="prefetch" href="/notes/assets/js/17.ed51894b.js"><link rel="prefetch" href="/notes/assets/js/18.9fb49419.js"><link rel="prefetch" href="/notes/assets/js/19.7dc2eeeb.js"><link rel="prefetch" href="/notes/assets/js/20.7a00165b.js"><link rel="prefetch" href="/notes/assets/js/21.11a3bf73.js"><link rel="prefetch" href="/notes/assets/js/22.c3e2e2ec.js"><link rel="prefetch" href="/notes/assets/js/23.f2469d09.js"><link rel="prefetch" href="/notes/assets/js/24.addfa627.js"><link rel="prefetch" href="/notes/assets/js/25.e898fa98.js"><link rel="prefetch" href="/notes/assets/js/26.5e7143e5.js"><link rel="prefetch" href="/notes/assets/js/27.0ddb0e9d.js"><link rel="prefetch" href="/notes/assets/js/28.3fa8851d.js"><link rel="prefetch" href="/notes/assets/js/29.763810a0.js"><link rel="prefetch" href="/notes/assets/js/3.0860fcd4.js"><link rel="prefetch" href="/notes/assets/js/30.b163b39a.js"><link rel="prefetch" href="/notes/assets/js/31.1bf51c8c.js"><link rel="prefetch" href="/notes/assets/js/32.27d5724b.js"><link rel="prefetch" href="/notes/assets/js/33.ee797b9d.js"><link rel="prefetch" href="/notes/assets/js/34.ba7db30d.js"><link rel="prefetch" href="/notes/assets/js/35.1ac68442.js"><link rel="prefetch" href="/notes/assets/js/36.dad1e22e.js"><link rel="prefetch" href="/notes/assets/js/37.0779b856.js"><link rel="prefetch" href="/notes/assets/js/38.5881bebf.js"><link rel="prefetch" href="/notes/assets/js/39.5001b663.js"><link rel="prefetch" href="/notes/assets/js/4.11e35b6b.js"><link rel="prefetch" href="/notes/assets/js/40.4656e930.js"><link rel="prefetch" href="/notes/assets/js/41.ae873fd4.js"><link rel="prefetch" href="/notes/assets/js/42.ab4df5d7.js"><link rel="prefetch" href="/notes/assets/js/43.a093c33d.js"><link rel="prefetch" href="/notes/assets/js/44.88a65122.js"><link rel="prefetch" href="/notes/assets/js/45.697ac131.js"><link rel="prefetch" href="/notes/assets/js/46.d7e11c19.js"><link rel="prefetch" href="/notes/assets/js/47.eeac1f28.js"><link rel="prefetch" href="/notes/assets/js/48.75e10afc.js"><link rel="prefetch" href="/notes/assets/js/49.db3556a8.js"><link rel="prefetch" href="/notes/assets/js/5.fbaa339c.js"><link rel="prefetch" href="/notes/assets/js/50.c32b0e33.js"><link rel="prefetch" href="/notes/assets/js/51.5ac51772.js"><link rel="prefetch" href="/notes/assets/js/52.9d83ddb3.js"><link rel="prefetch" href="/notes/assets/js/53.2e172930.js"><link rel="prefetch" href="/notes/assets/js/54.5347d134.js"><link rel="prefetch" href="/notes/assets/js/55.b0ed4c4f.js"><link rel="prefetch" href="/notes/assets/js/56.9389708e.js"><link rel="prefetch" href="/notes/assets/js/57.eca8b30f.js"><link rel="prefetch" href="/notes/assets/js/58.493161e8.js"><link rel="prefetch" href="/notes/assets/js/59.db3da996.js"><link rel="prefetch" href="/notes/assets/js/6.f1778ba0.js"><link rel="prefetch" href="/notes/assets/js/60.b7920130.js"><link rel="prefetch" href="/notes/assets/js/61.f75aaa9b.js"><link rel="prefetch" href="/notes/assets/js/62.fe4cf3d8.js"><link rel="prefetch" href="/notes/assets/js/63.114eb979.js"><link rel="prefetch" href="/notes/assets/js/64.8a2f5b69.js"><link rel="prefetch" href="/notes/assets/js/65.003d2ec1.js"><link rel="prefetch" href="/notes/assets/js/66.5d4f90c0.js"><link rel="prefetch" href="/notes/assets/js/67.2896dcb6.js"><link rel="prefetch" href="/notes/assets/js/68.43848f12.js"><link rel="prefetch" href="/notes/assets/js/69.d79898a3.js"><link rel="prefetch" href="/notes/assets/js/7.9858f186.js"><link rel="prefetch" href="/notes/assets/js/70.e103d0d6.js"><link rel="prefetch" href="/notes/assets/js/71.0e88fabf.js"><link rel="prefetch" href="/notes/assets/js/72.8e1d6e00.js"><link rel="prefetch" href="/notes/assets/js/73.ba9c286e.js"><link rel="prefetch" href="/notes/assets/js/74.59b725a1.js"><link rel="prefetch" href="/notes/assets/js/75.1ad659b5.js"><link rel="prefetch" href="/notes/assets/js/76.e8951b01.js"><link rel="prefetch" href="/notes/assets/js/77.1ccbab13.js"><link rel="prefetch" href="/notes/assets/js/78.74e14ec4.js"><link rel="prefetch" href="/notes/assets/js/79.399eeec2.js"><link rel="prefetch" href="/notes/assets/js/8.077c4168.js"><link rel="prefetch" href="/notes/assets/js/80.cc54d958.js"><link rel="prefetch" href="/notes/assets/js/81.d17f4b40.js"><link rel="prefetch" href="/notes/assets/js/82.37f57606.js"><link rel="prefetch" href="/notes/assets/js/83.f6990828.js"><link rel="prefetch" href="/notes/assets/js/84.1f2a7cbd.js"><link rel="prefetch" href="/notes/assets/js/85.0e8c4664.js"><link rel="prefetch" href="/notes/assets/js/86.5e33fd37.js"><link rel="prefetch" href="/notes/assets/js/87.06c414b2.js"><link rel="prefetch" href="/notes/assets/js/88.d8aedbb1.js"><link rel="prefetch" href="/notes/assets/js/89.5e729be9.js"><link rel="prefetch" href="/notes/assets/js/9.22227320.js"><link rel="prefetch" href="/notes/assets/js/90.273812a1.js"><link rel="prefetch" href="/notes/assets/js/91.6de1ada5.js"><link rel="prefetch" href="/notes/assets/js/92.47fea0fd.js"><link rel="prefetch" href="/notes/assets/js/93.184247a5.js"><link rel="prefetch" href="/notes/assets/js/94.90129954.js"><link rel="prefetch" href="/notes/assets/js/95.b23319f5.js"><link rel="prefetch" href="/notes/assets/js/96.754bdd79.js"><link rel="prefetch" href="/notes/assets/js/97.17621162.js"><link rel="prefetch" href="/notes/assets/js/98.7fb9ed9b.js"><link rel="prefetch" href="/notes/assets/js/99.97bc5647.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.aa6162e3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><!----> <span class="site-name">Notes</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/notes/animation/" class="nav-link">
  动画
</a></div><div class="nav-item"><a href="/notes/article/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/notes/interview/" class="nav-link router-link-active">
  面试
</a></div><div class="nav-item"><a href="/notes/tool/" class="nav-link">
  工具库
</a></div> <a href="https://github.com/kaypler/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/notes/algorithm/" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/notes/animation/" class="nav-link">
  动画
</a></div><div class="nav-item"><a href="/notes/article/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/notes/interview/" class="nav-link router-link-active">
  面试
</a></div><div class="nav-item"><a href="/notes/tool/" class="nav-link">
  工具库
</a></div> <a href="https://github.com/kaypler/notes" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>经验之谈</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/interview/experience/browse-cache.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/notes/interview/experience/browse.html" class="sidebar-link">浏览器</a></li><li><a href="/notes/interview/experience/cross-platform.html" class="sidebar-link">跨端</a></li><li><a href="/notes/interview/experience/css.html" aria-current="page" class="active sidebar-link">CSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/notes/interview/experience/css.html#盒子模型" class="sidebar-link">盒子模型</a></li><li class="sidebar-sub-header"><a href="/notes/interview/experience/css.html#bfc" class="sidebar-link">BFC</a></li><li class="sidebar-sub-header"><a href="/notes/interview/experience/css.html#css的优先级" class="sidebar-link">CSS的优先级</a></li><li class="sidebar-sub-header"><a href="/notes/interview/experience/css.html#viewport" class="sidebar-link">viewport</a></li><li class="sidebar-sub-header"><a href="/notes/interview/experience/css.html#移动端适配方案" class="sidebar-link">移动端适配方案</a></li><li class="sidebar-sub-header"><a href="/notes/interview/experience/css.html#图片模糊问题" class="sidebar-link">图片模糊问题</a></li></ul></li><li><a href="/notes/interview/experience/event-loop.html" class="sidebar-link">Event Loop</a></li><li><a href="/notes/interview/experience/js.html" class="sidebar-link">Javascript</a></li><li><a href="/notes/interview/experience/miniprogram.html" class="sidebar-link">小程序</a></li><li><a href="/notes/interview/experience/network.html" class="sidebar-link">网络</a></li><li><a href="/notes/interview/experience/react.html" class="sidebar-link">React</a></li><li><a href="/notes/interview/experience/safety.html" class="sidebar-link">安全篇</a></li><li><a href="/notes/interview/experience/v8.html" class="sidebar-link">V8</a></li><li><a href="/notes/interview/experience/vite.html" class="sidebar-link">Vite</a></li><li><a href="/notes/interview/experience/vue.html" class="sidebar-link">Vue</a></li><li><a href="/notes/interview/experience/webpack.html" class="sidebar-link">Webpack</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>手写系列</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/interview/handwrite/ajax.html" class="sidebar-link">ajax</a></li><li><a href="/notes/interview/handwrite/async.html" class="sidebar-link">Async函数实现</a></li><li><a href="/notes/interview/handwrite/clone.html" class="sidebar-link">拷贝</a></li><li><a href="/notes/interview/handwrite/debounce-and-throttle.html" class="sidebar-link">防抖与节流</a></li><li><a href="/notes/interview/handwrite/design-pattern.html" class="sidebar-link">设计模式</a></li><li><a href="/notes/interview/handwrite/event.html" class="sidebar-link">事件订阅</a></li><li><a href="/notes/interview/handwrite/extend.html" class="sidebar-link">寄生组合式继承</a></li><li><a href="/notes/interview/handwrite/js-base.html" class="sidebar-link">javascript底层函数实现</a></li><li><a href="/notes/interview/handwrite/json.html" class="sidebar-link">JSON</a></li><li><a href="/notes/interview/handwrite/jsonp.html" class="sidebar-link">jsonp</a></li><li><a href="/notes/interview/handwrite/lru-cache.html" class="sidebar-link">LRU 缓存机制</a></li><li><a href="/notes/interview/handwrite/promise.html" class="sidebar-link">promise</a></li><li><a href="/notes/interview/handwrite/serial-and-concurrent.html" class="sidebar-link">串行和并行</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>性能调优</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/interview/optimize/browse.html" class="sidebar-link">浏览器性能优化</a></li><li><a href="/notes/interview/optimize/react.html" class="sidebar-link">React</a></li><li><a href="/notes/interview/optimize/weex.html" class="sidebar-link">weex</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>大厂真题</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/notes/interview/subject/ali-2021.html" class="sidebar-link">阿里2021第一轮笔试</a></li><li><a href="/notes/interview/subject/css.html" class="sidebar-link">CSS题目</a></li><li><a href="/notes/interview/subject/futu-2021.html" class="sidebar-link">富途2021面试</a></li><li><a href="/notes/interview/subject/js-advance.html" class="sidebar-link">JS真题</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="css"><a href="#css" class="header-anchor">#</a> CSS</h1> <h2 id="盒子模型"><a href="#盒子模型" class="header-anchor">#</a> 盒子模型</h2> <p>CSS盒模型本质上是一个盒子，封装周围的HTML元素，它包括：边距，边框，填充，和实际内容。
盒模型允许我们在其它元素和周围元素边框之间的空间放置元素。
下面的图片说明了盒子模型(Box Model)：
<img src="/notes/assets/img/box-model.eea9f77e.png" alt="An image"></p> <p>不同部分的说明：</p> <ul><li><strong>Margin(外边距)</strong> - 清除边框外的区域，外边距是透明的。</li> <li><strong>order(边框)</strong> - 围绕在内边距和内容外的边框。</li> <li><strong>Padding(内边距)</strong> - 清除内容周围的区域，内边距是透明的。</li> <li><strong>Content(内容)</strong> - 盒子的内容，显示文本和图像。</li></ul> <h3 id="w3c盒子模型"><a href="#w3c盒子模型" class="header-anchor">#</a> W3C盒子模型</h3> <p>标准盒模型下盒子的大小 = width ( content ) + border + padding + margin</p> <h3 id="怪异盒模型"><a href="#怪异盒模型" class="header-anchor">#</a> 怪异盒模型</h3> <p>怪异盒模型下盒子的大小=width（content + border + padding） + margin</p> <h2 id="bfc"><a href="#bfc" class="header-anchor">#</a> BFC</h2> <p>BFC 即 Block Formatting Contexts (块级格式化上下文)，它属于定位方案的普通流。
具有 BFC 特性的元素可以看作是隔离了的独立容器，容器里面的元素不会在布局上影响到外面的元素，并且 BFC 具有普通容器所没有的一些特性。</p> <h3 id="触发bfc"><a href="#触发bfc" class="header-anchor">#</a> 触发BFC</h3> <p>只要元素满足下面任一条件即可触发 BFC 特性：</p> <ul><li>body 根元素</li> <li>浮动元素：float 除 none 以外的值</li> <li>绝对定位元素：position (absolute、fixed)</li> <li>display 为 inline-block、table-cells、flex</li> <li>overflow 除了 visible 以外的值 (hidden、auto、scroll)</li></ul> <h3 id="bfc-特性及应用"><a href="#bfc-特性及应用" class="header-anchor">#</a> BFC 特性及应用</h3> <ol><li>同一个 BFC 下外边距会发生折叠</li> <li>BFC 可以包含浮动的元素（清除浮动）</li> <li>BFC 可以阻止元素被浮动元素覆盖</li></ol> <h2 id="css的优先级"><a href="#css的优先级" class="header-anchor">#</a> CSS的优先级</h2> <p><a href="https://www.w3.org/TR/selectors-3/#specificity" target="_blank" rel="noopener noreferrer">优先级<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>就是分配给指定的 CSS 声明的一个权重，它由匹配的选择器中的每一种选择器类型的数值决定。
而当优先级与多个 CSS 声明中任意一个声明的优先级相等的时候，CSS 中最后的那个声明将会被应用到元素上。
当同一个元素有多个声明的时候，优先级才会有意义。因为每一个直接作用于元素的 CSS 规则总是会接管/覆盖（take over）该元素从祖先元素继承而来的规则。</p> <p>权重得分计算规则：</p> <ol><li>通用选择器(*)没有特异性，只能得到0点</li> <li>元素或伪元素选择器获得1个点</li> <li>类、伪类或属性选择器获得10个点</li> <li>ID 选择器获得100个点</li> <li>内联样式属性获得1000个点</li> <li>!important获得10000个点</li></ol> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>:not()</code>本身不会影响优先级计算，但它括号里面添加的选择器会影响优先级。</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">div:not(.my-class)</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这个例子得到11点，因为它有一个类型选择器(div)和一个类在:not()中</p></div> <h2 id="viewport"><a href="#viewport" class="header-anchor">#</a> viewport</h2> <p>视口( viewport)代表当前可见的计算机图形区域。在 Web浏览器术语中，通常与浏览器窗口相同，但不包括浏览器的 UI， 菜单栏等——即指你正在浏览的文档的那一部分。</p> <p>一般我们所说的视口共包括三种：布局视口、视觉视口和理想视口，它们在屏幕适配中起着非常重要的作用。</p> <ul><li><strong>布局视口( layout viewport)</strong>：当我们以百分比来指定一个元素的大小时，它的计算值是由这个元素的包含块计算而来的。当这个元素是最顶级的元素时，它就是基于布局视口来计算的。
所以，布局视口是网页布局的基准窗口，在 PC浏览器上，布局视口就等于当前浏览器的窗口大小（不包括 borders 、 margins、滚动条）。
在移动端，布局视口被赋予一个默认值，大部分为 980px，这保证 PC的网页可以在手机浏览器上呈现，但是非常小，用户可以手动对网页进行放大。
我们可以通过调用 <code>document.documentElement.clientWidth/clientHeight</code>来获取布局视口大小。</li> <li><strong>视觉视口( visual viewport)</strong>：用户通过屏幕真实看到的区域。视觉视口默认等于当前浏览器的窗口大小（包括滚动条宽度）。
当用户对浏览器进行缩放时，不会改变布局视口的大小，所以页面布局是不变的，但是缩放会改变视觉视口的大小。
例如：用户将浏览器窗口放大了 200%，这时浏览器窗口中的 CSS像素会随着视觉视口的放大而放大，这时一个 CSS像素会跨越更多的物理像素。
所以，布局视口会限制你的 CSS布局而视觉视口决定用户具体能看到什么。我们可以通过调用 <code>window.innerWidth/innerHeight</code>来获取视觉视口大小。</li> <li><strong>理想视口( ideal viewport)</strong>：布局视口在移动端展示的效果并不是一个理想的效果，所以理想视口就诞生了：网站页面在移动端展示的理想大小。
在浏览器调试移动端时页面上给定的像素大小就是理想视口大小，它的单位正是设备独立像素。
上面在介绍 CSS像素时曾经提到 <code>页面的缩放系数=CSS像素/设备独立像素</code>，实际上说 <code>页面的缩放系数=理想视口宽度/视觉视口宽度</code>更为准确。
所以，当页面缩放比例为 100%时， CSS像素=设备独立像素， 理想视口=视觉视口。
我们可以通过调用 <code>screen.width/height</code>来获取理想视口大小。</li></ul> <h3 id="meta-viewport"><a href="#meta-viewport" class="header-anchor">#</a> Meta viewport</h3> <p><code>&lt;meta&gt;</code>元素表示那些不能由其它 HTML元相关元素之一表示的任何元数据信息，它可以告诉浏览器如何解析页面。
我们可以借助 </p><meta>元素的 viewport来帮助我们设置视口、缩放等，从而让移动端得到更好的展示效果。<p></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width; initial-scale=1; maximum-scale=1; minimum-scale=1; user-scalable=no;<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>为了在移动端让页面获得更好的显示效果，我们必须让布局视口、视觉视口都尽可能等于理想视口。
<code>device-width</code>就等于理想视口的宽度，所以设置 <code>width=device-width</code>就相当于让布局视口等于理想视口。
由于 <code>initial-scale=理想视口宽度/视觉视口宽度</code>，所以我们设置 <code>initial-scale=1</code>;就相当于让视觉视口等于理想视口。
这时，1个 CSS像素就等于1个设备独立像素，而且我们也是基于理想视口来进行布局的，所以呈现出来的页面布局在各种设备上都能大致相似。</p> <p>上面提到 <code>width</code>可以决定布局视口的宽度，实际上它并不是布局视口的唯一决定性因素，设置 <code>initial-scale</code>也有肯能影响到布局视口，因为布局视口宽度取的是<strong>width和视觉视口宽度的最大值</strong>。
例如：若手机的理想视口宽度为 400px，设置 <code>width=device-width</code>， <code>initial-scale=2</code>，此时 <code>视觉视口宽度=理想视口宽度/initial-scale</code>即 200px，布局视口取两者最大值即 device-width 400px。
若设置 width=device-width， initial-scale=0.5，此时 视觉视口宽度=理想视口宽度/initial-scale即 800px，布局视口取两者最大值即 800px。</p> <h3 id="一些术语"><a href="#一些术语" class="header-anchor">#</a> 一些术语</h3> <ul><li><strong>英寸</strong>: 一般用英寸描述屏幕的物理大小(屏幕对角线的长度)，英寸(<code>inch</code>,缩写为 <code>in</code>)在荷兰语中的本意是大拇指，一英寸就是指甲底部普通人拇指的宽度。<code>1英寸=2.54厘米</code></li> <li><strong>像素</strong>: 像素即一个小方块，它具有特定的位置和颜色。</li> <li><strong>屏幕分辨率</strong>: 指一个屏幕具体由多少个像素点组成。</li></ul> <h3 id="ppi"><a href="#ppi" class="header-anchor">#</a> PPI</h3> <p>PPI(Pixel Per Inch)：每英寸包括的像素数。PPI可以用于描述屏幕的清晰度以及一张图片的质量。<br>
计算公式：sqrt(水平像素点数^2+垂直像素点数^2)/尺寸</p> <h3 id="dpi"><a href="#dpi" class="header-anchor">#</a> DPI</h3> <p>DPI(Dot Per Inch)：即每英寸包括的点数。
这里的点是一个抽象的单位，它可以是屏幕像素点、图片像素点也可以是打印机的墨点。
平时你可能会看到使用 DPI来描述图片和屏幕，这时的 DPI应该和 PPI是等价的， DPI最常用的是用于描述打印机，表示打印机每英寸可以打印的点数。</p> <h3 id="dip"><a href="#dip" class="header-anchor">#</a> DIP</h3> <p>设备独立像素( Device Independent Pixels)简称 DIP或 DP。在实际开发中使用的CSS中的像素就是设备独立像素中的一种，CSS像素的单位为px。
这个单位是用来同时告诉不同分辨率的手机，它们在界面上显示元素的大小是多少。
例如黑色手机使用了视网膜屏幕的技术，假如列表的宽度为 300个像素，那么在一条水平线上，
白色手机会用 300个物理像素去渲染它，而黑色手机实际上会用 600个物理像素去渲染它。</p> <h3 id="dpr"><a href="#dpr" class="header-anchor">#</a> DPR</h3> <p>设备像素比 device pixel ratio简称 dpr，即物理像素和设备独立像素的比值。
在 web中，浏览器为我们提供了<code>window.devicePixelRatio</code>来帮助我们获取 dpr。
在 css中，可以使用媒体查询<code>min-device-pixel-ratio</code>，区分 dpr：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@media</span><span class="token punctuation">(</span><span class="token property">-webkit-min-device-pixel-ratio</span><span class="token punctuation">:</span>2<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token property">min-device-pixel-ratio</span><span class="token punctuation">:</span>2<span class="token punctuation">)</span></span><span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>在写 CSS时，我们用到最多的单位是 px，即 CSS像素，当页面缩放比例为 100%时，一个 CSS像素等于一个设备独立像素。
但是 CSS像素是很容易被改变的，当用户对浏览器进行了放大， CSS像素会被放大，这时一个 CSS像素会跨越更多的物理像素。
页面的缩放系数=CSS像素/设备独立像素。</p></blockquote> <h3 id="获取浏览器大小"><a href="#获取浏览器大小" class="header-anchor">#</a> 获取浏览器大小</h3> <ul><li><strong>window.innerHeight</strong>：获取浏览器视觉视口高度（包括垂直滚动条）。</li> <li><strong>window.outerHeight</strong>：获取浏览器窗口外部的高度。表示整个浏览器窗口的高度，包括侧边栏、窗口镶边和调正窗口大小的边框。</li> <li><strong>window.screen.Height</strong>：获取获屏幕取理想视口高度，这个数值是固定的， 设备的分辨率/设备像素比</li> <li><strong>window.screen.availHeight</strong>：浏览器窗口可用的高度。</li> <li><strong>document.documentElement.clientHeight</strong>：获取浏览器布局视口高度，包括内边距，但不包括垂直滚动条、边框和外边距。</li> <li><strong>document.documentElement.offsetHeight</strong>：包括内边距、滚动条、边框和外边距。</li> <li><strong>document.documentElement.scrollHeight</strong>：在不使用滚动条的情况下适合视口中的所有内容所需的最小宽度。测量方式与 clientHeight相同：它包含元素的内边距，但不包括边框，外边距或垂直滚动条。</li></ul> <h3 id="获取元素大小"><a href="#获取元素大小" class="header-anchor">#</a> 获取元素大小</h3> <ul><li><strong>clientHeight</strong>：包括padding但不包括border、水平滚动条、margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素。</li> <li><strong>offsetHeight</strong>：包括padding、border、水平滚动条，但不包括margin的元素的高度。对于inline的元素这个属性一直是0，单位px，只读元素。</li> <li><strong>scrollHeight</strong>：包括当前不可见部分的元素的高度。而可见部分的高度其实就是clientHeight</li> <li><strong>scrollTop</strong>：代表在有滚动条时，滚动条向下滚动的距离也就是元素顶部被遮住部分的高度。</li> <li><strong>offsetTop</strong>：当前元素顶部距离最近父元素顶部的距离,和有没有滚动条没有关系。单位px，只读元素。</li></ul> <div class="custom-block warning"><p class="custom-block-title">offsetHeight与style.height区别</p> <ol><li>offsetHeight可以获取写在样式文件里的属性值，而style.height只能获取行内属性，在表现与结构分离的今天，这显然是不合适的</li> <li>offsetHeight返回的是一个数值，而style.height返回的是一个字符串，单位是“px”</li> <li>offsetHeight是只读，而style.height是可读写</li> <li>如果没有为元素设置高度，offsetHeight会根据内容获取高度值，而style.height会返回undefind</li></ol></div> <h2 id="移动端适配方案"><a href="#移动端适配方案" class="header-anchor">#</a> 移动端适配方案</h2> <h3 id="_1-flexible方案"><a href="#_1-flexible方案" class="header-anchor">#</a> 1.flexible方案</h3> <p>flexible方案是阿里早期开源的一个移动端适配解决方案，引用 flexible后，我们在页面上统一使用<code>rem</code>来布局。
<code>rem</code>是相对于<code>html</code>节点的<code>font-size</code>来做计算的。</p> <p>将 <code>html</code>节点的 <code>font-size</code>设置为页面 <code>clientWidth</code>(布局视口)的 1/10，即 1rem就等于页面布局视口的 1/10，
这就意味着我们后面使用的 rem都是按照页面比例来计算的。</p> <p>以 iPhone6为例：布局视口为 375px，则 <code>1rem=37.5px</code>，这时 UI给定一个元素的宽为 75px（设备独立像素），我们只需要将它设置为 <code>75/37.5=2rem</code>。</p> <p>当然，每个布局都要计算非常繁琐，我们可以借助 <code>PostCSS</code>的 <code>px2rem</code>插件来帮助我们完成这个过程。</p> <div class="custom-block warning"><p class="custom-block-title">lexible方案的缺陷</p> <ol><li>lib-flexible在适配的时候会修改viewport的initial-scale，导致viewport的width不等于device-width，导致媒介查询不可用。</li> <li>lib-flexible现在只适配了iphone设备，安卓设备压根没适配。</li></ol></div> <h3 id="vh、vw方案"><a href="#vh、vw方案" class="header-anchor">#</a> vh、vw方案</h3> <p>vh、vw方案即将视觉视口宽度 window.innerWidth和视觉视口高度 window.innerHeight 等分为 100 份。</p> <p>如果视觉视口为 <code>375px</code>，那么 <code>1vw=3.75px</code>，这时 UI给定一个元素的宽为 <code>75px</code>（设备独立像素），我们只需要将它设置为 <code>75/3.75=20vw</code>。</p> <p>这里的比例关系我们也不用自己换算，我们可以使用 <code>PostCSS</code>的 <code>postcss-px-to-viewport</code> 插件帮我们完成这个过程。写代码时，我们只需要根据 UI给的设计图写 px单位即可。</p> <p>当然，没有一种方案是十全十美的， vw同样有一定的缺陷：</p> <ul><li>px转换成 vw不一定能完全整除，因此有一定的像素差。</li> <li>比如当容器使用 vw， margin采用 px时，很容易造成整体宽度超过 100vw，从而影响布局效果。当然我们也是可以避免的，例如使用 padding代替 margin，结合 calc()函数使用等等...</li></ul> <h2 id="图片模糊问题"><a href="#图片模糊问题" class="header-anchor">#</a> 图片模糊问题</h2> <p>我们平时使用的图片大多数都属于位图（ png、jpg...），位图由一个个像素点构成的，每个像素都具有特定的位置和颜色值。
理论上，位图的每个像素对应在屏幕上使用一个物理像素来渲染，才能达到最佳的显示效果。
而在 dpr&gt;1的屏幕上，位图的一个像素可能由多个物理像素来渲染，然而这些物理像素点并不能被准确的分配上对应位图像素的颜色，只能取近似值，所以相同的图片在 dpr&gt;1的屏幕上就会模糊。</p> <p><strong>解决方案</strong>：</p> <ol><li>使用<code>media</code>查询判断不同的设备像素比来显示不同精度的图片</li> <li>使用 <code>img</code>标签的 <code>srcset</code>属性，浏览器会自动根据像素密度匹配最佳显示图片</li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/notes/interview/experience/cross-platform.html" class="prev">
        跨端
      </a></span> <span class="next"><a href="/notes/interview/experience/event-loop.html">
        Event Loop
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/notes/assets/js/app.e4bd1985.js" defer></script><script src="/notes/assets/js/2.48edc9b5.js" defer></script><script src="/notes/assets/js/16.a390283c.js" defer></script>
  </body>
</html>
